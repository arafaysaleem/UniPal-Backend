<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:30,&quot;tests&quot;:91,&quot;passes&quot;:91,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2022-07-02T12:59:05.722Z&quot;,&quot;end&quot;:&quot;2022-07-02T12:59:06.065Z&quot;,&quot;duration&quot;:343,&quot;testsRegistered&quot;:91,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e3c3a30e-cc69-441b-acda-5d5c519b4823&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7f5b9807-e045-4431-a9a4-01db7ea872b8&quot;,&quot;title&quot;:&quot;Activity Status Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Status Model \&quot;before each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea9ff262-6051-4c84-8a74-e8499fb66d7d&quot;,&quot;parentUUID&quot;:&quot;7f5b9807-e045-4431-a9a4-01db7ea872b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Status Model \&quot;after each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf2c9b38-3562-4c2a-a546-7c4b5df8174a&quot;,&quot;parentUUID&quot;:&quot;7f5b9807-e045-4431-a9a4-01db7ea872b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b6caa199-601e-47d5-850a-a36e602c1d5e&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with empty filters\n            THEN all activity statuses are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some activity statuses\n            WHEN this function is called with empty filters\n            THEN all activity statuses are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingActivityStatuses);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityStatusList).to.be.eql(existingActivityStatuses);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe11e212-30c4-44dc-892d-860d583423f6&quot;,&quot;parentUUID&quot;:&quot;b6caa199-601e-47d5-850a-a36e602c1d5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with filters specified\n            THEN only matching activity statuses are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some activity statuses\n            WHEN this function is called with filters specified\n            THEN only matching activity statuses are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {activity_status_id: 1};\nconst filterCheck = (aStatus) =&gt; aStatus.activity_status_id === filters.activity_status_id;\nconst filteredActivityStatuses = existingActivityStatuses.filter(filterCheck);\ndbServiceStub.returns(filteredActivityStatuses);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatusList).to.be.eql(filteredActivityStatuses);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;745c1478-a425-4854-a70f-e14c224f426f&quot;,&quot;parentUUID&quot;:&quot;b6caa199-601e-47d5-850a-a36e602c1d5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityStatusList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;009c3faf-4003-4c96-aa5a-fead2ad9d2c2&quot;,&quot;parentUUID&quot;:&quot;b6caa199-601e-47d5-850a-a36e602c1d5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07b22236-8ff5-4b6b-9ac1-ba5cc4ec57ed&quot;,&quot;parentUUID&quot;:&quot;b6caa199-601e-47d5-850a-a36e602c1d5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe11e212-30c4-44dc-892d-860d583423f6&quot;,&quot;745c1478-a425-4854-a70f-e14c224f426f&quot;,&quot;009c3faf-4003-4c96-aa5a-fead2ad9d2c2&quot;,&quot;07b22236-8ff5-4b6b-9ac1-ba5cc4ec57ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c59811c0-4d7e-47c2-bcbc-0e76504d5c25&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with some filter\n            THEN a single filtered activity status is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has some activity statuses\n            WHEN this function is called with some filter\n            THEN a single filtered activity status is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (aStatus) =&gt; aStatus.activity_status_id === filters.activity_status_id;\nconst filteredActivityStatus = existingActivityStatuses.find(filterCheck);\ndbServiceStub.returns([filteredActivityStatus]);\n// act\nconst activityStatus = await ActivityStatusModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.activity_status_id]))).to.be.true;\nexpect(activityStatus).to.be.eql(filteredActivityStatus);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1693b09a-3501-4585-a98e-a04f222bbe25&quot;,&quot;parentUUID&quot;:&quot;c59811c0-4d7e-47c2-bcbc-0e76504d5c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst activityStatus = await ActivityStatusModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatus).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;545b250c-d4cf-47b0-9930-387324267874&quot;,&quot;parentUUID&quot;:&quot;c59811c0-4d7e-47c2-bcbc-0e76504d5c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93ad8579-9fda-4f07-9ce6-310adba850d4&quot;,&quot;parentUUID&quot;:&quot;c59811c0-4d7e-47c2-bcbc-0e76504d5c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1693b09a-3501-4585-a98e-a04f222bbe25&quot;,&quot;545b250c-d4cf-47b0-9930-387324267874&quot;,&quot;93ad8579-9fda-4f07-9ce6-310adba850d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;05b87017-d03d-49f4-830d-a1db1df816c6&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity status\n            WHEN this function is called with new data\n            THEN a new activity status is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN a new activity status\n            WHEN this function is called with new data\n            THEN a new activity status is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingActivityStatuses.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await ActivityStatusModel.create(newActivityStatus);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([newActivityStatus.activity_status]))).to.be.true;\nexpect(result.activity_status_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f321e053-1052-4d51-975e-57f482155de0&quot;,&quot;parentUUID&quot;:&quot;05b87017-d03d-49f4-830d-a1db1df816c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status\n            WHEN this function is called with new data\n            AND the database fails to create a new activity status\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN a new activity status\n            WHEN this function is called with new data\n            AND the database fails to create a new activity status\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst activityStatus = await ActivityStatusModel.create(newActivityStatus);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatus).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;574db1a5-12dd-47b6-bd39-61a3a834e586&quot;,&quot;parentUUID&quot;:&quot;05b87017-d03d-49f4-830d-a1db1df816c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.create(newActivityStatus);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e469dcc9-e4b5-438a-8391-b712c4255e71&quot;,&quot;parentUUID&quot;:&quot;05b87017-d03d-49f4-830d-a1db1df816c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f321e053-1052-4d51-975e-57f482155de0&quot;,&quot;574db1a5-12dd-47b6-bd39-61a3a834e586&quot;,&quot;e469dcc9-e4b5-438a-8391-b712c4255e71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            THEN the specific activity status is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            THEN the specific activity status is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newActivityStatus.activity_status, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42a3c647-2763-4ad0-aefe-ffd9431c05ec&quot;,&quot;parentUUID&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity status with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity status with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab4ffab8-1109-42eb-b4ad-5da7d0e9df8f&quot;,&quot;parentUUID&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database finds the activity status but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database finds the activity status but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f29d5ea-5bf4-4cb7-ae04-9181be19cca7&quot;,&quot;parentUUID&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity status name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity status name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a09ce6d-efb1-45b6-8ecd-07bc3682de1f&quot;,&quot;parentUUID&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingActivityStatuses[0].activity_status_id;\n// act\nlet error;\ntry {\n    await ActivityStatusModel.update(newActivityStatus, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb61b0ff-c458-433a-9945-85220d0494c8&quot;,&quot;parentUUID&quot;:&quot;d0d43ba3-a3a1-4965-a96d-703c8bacdda5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42a3c647-2763-4ad0-aefe-ffd9431c05ec&quot;,&quot;ab4ffab8-1109-42eb-b4ad-5da7d0e9df8f&quot;,&quot;1f29d5ea-5bf4-4cb7-ae04-9181be19cca7&quot;,&quot;7a09ce6d-efb1-45b6-8ecd-07bc3682de1f&quot;,&quot;bb61b0ff-c458-433a-9945-85220d0494c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58a87899-1b34-498e-8e67-6ce4297a4b02&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with an existing activity_status_id\n            THEN that activity status is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has some activity statuses\n            WHEN this function is called with an existing activity_status_id\n            THEN that activity status is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await ActivityStatusModel.delete(activityStatusId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4284d1bc-be04-4855-ae76-75cd36eaabb8&quot;,&quot;parentUUID&quot;:&quot;58a87899-1b34-498e-8e67-6ce4297a4b02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityStatusModel.delete(activityStatusId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85a158e7-8e07-401b-b088-729385696321&quot;,&quot;parentUUID&quot;:&quot;58a87899-1b34-498e-8e67-6ce4297a4b02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.delete(activityStatusId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f6355cb-119c-4879-bacd-2a87b824174c&quot;,&quot;parentUUID&quot;:&quot;58a87899-1b34-498e-8e67-6ce4297a4b02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4284d1bc-be04-4855-ae76-75cd36eaabb8&quot;,&quot;85a158e7-8e07-401b-b088-729385696321&quot;,&quot;0f6355cb-119c-4879-bacd-2a87b824174c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f953316b-0474-45c1-81c3-a387359628af&quot;,&quot;title&quot;:&quot;Activity Type Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Activity Type Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Type Model \&quot;before each\&quot; hook in \&quot;Activity Type Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac72b2ed-0ce5-4616-b10b-cb7ce0a981f3&quot;,&quot;parentUUID&quot;:&quot;f953316b-0474-45c1-81c3-a387359628af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Activity Type Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Type Model \&quot;after each\&quot; hook in \&quot;Activity Type Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f1d9628-7363-4389-a756-f51b71341fb0&quot;,&quot;parentUUID&quot;:&quot;f953316b-0474-45c1-81c3-a387359628af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;86b30013-e5bf-46a4-a0b4-efe70334fe8f&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity types\n            WHEN this function is called with empty filters\n            THEN all activity types are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findAll \n            GIVEN the database has some activity types\n            WHEN this function is called with empty filters\n            THEN all activity types are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingActivityTypes);\n// act\nconst activityTypeList = await ActivityTypeModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityTypeList).to.be.eql(existingActivityTypes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6d0f3b3-404d-4fcb-b596-7b40de5ef91a&quot;,&quot;parentUUID&quot;:&quot;86b30013-e5bf-46a4-a0b4-efe70334fe8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some activity types\n            WHEN this function is called with filters specified\n            THEN only matching activity types are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findAll \n            GIVEN the database has some activity types\n            WHEN this function is called with filters specified\n            THEN only matching activity types are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {activity_type_id: 1};\nconst filterCheck = (aType) =&gt; aType.activity_type_id === filters.activity_type_id;\nconst filteredActivityTypes = existingActivityTypes.filter(filterCheck);\ndbServiceStub.returns(filteredActivityTypes);\n// act\nconst activityTypeList = await ActivityTypeModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityTypeList).to.be.eql(filteredActivityTypes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;051f6b3a-058a-49d3-89ce-af80b7283486&quot;,&quot;parentUUID&quot;:&quot;86b30013-e5bf-46a4-a0b4-efe70334fe8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findAll \n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst activityTypeList = await ActivityTypeModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityTypeList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ba2e654-2666-4e9a-9a87-3d7fdf513e25&quot;,&quot;parentUUID&quot;:&quot;86b30013-e5bf-46a4-a0b4-efe70334fe8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityTypeModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;434caddd-b62a-41c7-8f5d-b3af60d068f6&quot;,&quot;parentUUID&quot;:&quot;86b30013-e5bf-46a4-a0b4-efe70334fe8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6d0f3b3-404d-4fcb-b596-7b40de5ef91a&quot;,&quot;051f6b3a-058a-49d3-89ce-af80b7283486&quot;,&quot;5ba2e654-2666-4e9a-9a87-3d7fdf513e25&quot;,&quot;434caddd-b62a-41c7-8f5d-b3af60d068f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f137996-ee74-4849-9bed-284954b64e10&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity types\n            WHEN this function is called with some filter\n            THEN a single filtered activity type is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findOne \n            GIVEN the database has some activity types\n            WHEN this function is called with some filter\n            THEN a single filtered activity type is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (aType) =&gt; aType.activity_type_id === filters.activity_type_id;\nconst filteredActivityType = existingActivityTypes.find(filterCheck);\ndbServiceStub.returns([filteredActivityType]);\n// act\nconst activityType = await ActivityTypeModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.activity_type_id]))).to.be.true;\nexpect(activityType).to.be.eql(filteredActivityType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87223c34-c68d-4ac5-904c-fbe7e943d152&quot;,&quot;parentUUID&quot;:&quot;0f137996-ee74-4849-9bed-284954b64e10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findOne \n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst activityType = await ActivityTypeModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityType).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05eee46f-848f-4a20-8cc2-08ea32cf5211&quot;,&quot;parentUUID&quot;:&quot;0f137996-ee74-4849-9bed-284954b64e10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityTypeModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05ed0f92-e37d-470a-ad98-5a1d8859e3f9&quot;,&quot;parentUUID&quot;:&quot;0f137996-ee74-4849-9bed-284954b64e10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87223c34-c68d-4ac5-904c-fbe7e943d152&quot;,&quot;05eee46f-848f-4a20-8cc2-08ea32cf5211&quot;,&quot;05ed0f92-e37d-470a-ad98-5a1d8859e3f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a945144f-47a4-4db1-9df1-ef1a0d79f8ce&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity type\n            WHEN this function is called with new data\n            THEN a new activity type is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model create \n            GIVEN a new activity type\n            WHEN this function is called with new data\n            THEN a new activity type is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingActivityTypes.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await ActivityTypeModel.create(newActivityType);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([newActivityType.activity_type]))).to.be.true;\nexpect(result.activity_type_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3dc5fdf-8651-4f68-9bcb-bde5a700ba3d&quot;,&quot;parentUUID&quot;:&quot;a945144f-47a4-4db1-9df1-ef1a0d79f8ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity type\n            WHEN this function is called with new data\n            AND the database fails to create a new activity type\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model create \n            GIVEN a new activity type\n            WHEN this function is called with new data\n            AND the database fails to create a new activity type\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst activityType = await ActivityTypeModel.create(newActivityType);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityType).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d2454de-4e91-4c5b-be1f-ecd2636f00e9&quot;,&quot;parentUUID&quot;:&quot;a945144f-47a4-4db1-9df1-ef1a0d79f8ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityTypeModel.create(newActivityType);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2ac84b7-cf65-4b93-b6bb-5cd9a7553485&quot;,&quot;parentUUID&quot;:&quot;a945144f-47a4-4db1-9df1-ef1a0d79f8ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3dc5fdf-8651-4f68-9bcb-bde5a700ba3d&quot;,&quot;7d2454de-4e91-4c5b-be1f-ecd2636f00e9&quot;,&quot;b2ac84b7-cf65-4b93-b6bb-5cd9a7553485&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            THEN the specific activity type is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model update \n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            THEN the specific activity type is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityTypes[0].activity_type_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await ActivityTypeModel.update(newActivityType, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newActivityType.activity_type, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e0569b2-2a2a-431b-b721-d7e15f3b2434&quot;,&quot;parentUUID&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity type with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model update \n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity type with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityTypes[0].activity_type_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityTypeModel.update(newActivityType, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d860cdc9-288b-4173-9d8c-035a9235b7cd&quot;,&quot;parentUUID&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database finds the activity type but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model update \n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database finds the activity type but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityTypes[0].activity_type_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityTypeModel.update(newActivityType, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0904f671-dcc5-42ce-bc27-8ea2ee67ef8f&quot;,&quot;parentUUID&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity type name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model update \n            GIVEN a new activity type name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity type name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityTypes[0].activity_type_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityTypeModel.update(newActivityType, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe8ab050-5cd1-42b7-813e-6eb197b3086b&quot;,&quot;parentUUID&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingActivityTypes[0].activity_type_id;\n// act\nlet error;\ntry {\n    await ActivityTypeModel.update(newActivityType, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40c9d4f6-60c9-4fa5-ba5d-f8ed652ea5a1&quot;,&quot;parentUUID&quot;:&quot;4d9e31ad-96ae-449a-b4b6-3e74c4164352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e0569b2-2a2a-431b-b721-d7e15f3b2434&quot;,&quot;d860cdc9-288b-4173-9d8c-035a9235b7cd&quot;,&quot;0904f671-dcc5-42ce-bc27-8ea2ee67ef8f&quot;,&quot;fe8ab050-5cd1-42b7-813e-6eb197b3086b&quot;,&quot;40c9d4f6-60c9-4fa5-ba5d-f8ed652ea5a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0e8a5391-e253-4e79-ab72-aa6d6b314f4f&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityType.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity types\n            WHEN this function is called with an existing activity_type_id\n            THEN that activity type is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model delete \n            GIVEN the database has some activity types\n            WHEN this function is called with an existing activity_type_id\n            THEN that activity type is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await ActivityTypeModel.delete(activityTypeId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityTypeId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29086387-dad6-45ce-a90e-a2b3b0e1b7ba&quot;,&quot;parentUUID&quot;:&quot;0e8a5391-e253-4e79-ab72-aa6d6b314f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model delete \n            GIVEN the database has no activity types\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityTypeModel.delete(activityTypeId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityTypeId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40563bd8-4516-4299-8e35-40b7bef291e5&quot;,&quot;parentUUID&quot;:&quot;0e8a5391-e253-4e79-ab72-aa6d6b314f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Type Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityTypeModel.delete(activityTypeId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityTypeId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2697c983-99bb-4400-89cd-f96f66c9ee00&quot;,&quot;parentUUID&quot;:&quot;0e8a5391-e253-4e79-ab72-aa6d6b314f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29086387-dad6-45ce-a90e-a2b3b0e1b7ba&quot;,&quot;40563bd8-4516-4299-8e35-40b7bef291e5&quot;,&quot;2697c983-99bb-4400-89cd-f96f66c9ee00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fb035500-e3dd-4f1c-b844-08b0fb25321e&quot;,&quot;title&quot;:&quot;Campus Spot Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Campus Spot Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model \&quot;before each\&quot; hook in \&quot;Campus Spot Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1958245e-49d8-4545-970a-e92494cdbd22&quot;,&quot;parentUUID&quot;:&quot;fb035500-e3dd-4f1c-b844-08b0fb25321e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Campus Spot Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model \&quot;after each\&quot; hook in \&quot;Campus Spot Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7124e56e-365b-4995-9576-a138ccb6bbf5&quot;,&quot;parentUUID&quot;:&quot;fb035500-e3dd-4f1c-b844-08b0fb25321e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some campus spots\n            WHEN this function is called with empty filters\n            THEN all campus spots are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findAll \n            GIVEN the database has some campus spots\n            WHEN this function is called with empty filters\n            THEN all campus spots are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingCampusSpots);\n// act\nconst campusSpotList = await CampusSpotModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(campusSpotList).to.be.eql(existingCampusSpots);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c2d6a33-1d53-45ba-b92c-5d081cd2c5c8&quot;,&quot;parentUUID&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some campus spots\n            WHEN this function is called with campus_spot_id specified\n            THEN only matching campus spots are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findAll \n            GIVEN the database has some campus spots\n            WHEN this function is called with campus_spot_id specified\n            THEN only matching campus spots are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {campus_spot_id: 1};\nconst filterCheck = (cSpot) =&gt; cSpot.campus_spot_id === filters.campus_spot_id;\nconst filteredCampusSpots = existingCampusSpots.filter(filterCheck);\ndbServiceStub.returns(filteredCampusSpots);\n// act\nconst campusSpotList = await CampusSpotModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(campusSpotList).to.be.eql(filteredCampusSpots);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27980841-2540-4ef9-801f-a6394f692a14&quot;,&quot;parentUUID&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some campus spots\n            WHEN this function is called with campus_id specified\n            THEN only matching campus spots are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findAll \n            GIVEN the database has some campus spots\n            WHEN this function is called with campus_id specified\n            THEN only matching campus spots are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {campus_id: 1};\nconst filterCheck = (cSpot) =&gt; cSpot.campus_id === filters.campus_id;\nconst filteredCampusSpots = existingCampusSpots.filter(filterCheck);\ndbServiceStub.returns(filteredCampusSpots);\n// act\nconst campusSpotList = await CampusSpotModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(campusSpotList).to.be.eql(filteredCampusSpots);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f62ccdf-def4-4f40-a3a5-2cca77c73def&quot;,&quot;parentUUID&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findAll \n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst campusSpotList = await CampusSpotModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(campusSpotList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3199be47-a38a-4dbb-9202-b1c777fb2344&quot;,&quot;parentUUID&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await CampusSpotModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85abc188-d7fe-45d7-917f-8249487e22a9&quot;,&quot;parentUUID&quot;:&quot;0b205868-6887-47af-be96-feacd55f2163&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c2d6a33-1d53-45ba-b92c-5d081cd2c5c8&quot;,&quot;27980841-2540-4ef9-801f-a6394f692a14&quot;,&quot;1f62ccdf-def4-4f40-a3a5-2cca77c73def&quot;,&quot;3199be47-a38a-4dbb-9202-b1c777fb2344&quot;,&quot;85abc188-d7fe-45d7-917f-8249487e22a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b5543445-a7f6-4f53-aad4-6181a4f94214&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some campus spots\n            WHEN this function is called with some filter\n            THEN a single filtered campus spot is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findOne \n            GIVEN the database has some campus spots\n            WHEN this function is called with some filter\n            THEN a single filtered campus spot is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (cSpot) =&gt; cSpot.campus_spot_id === filters.campus_spot_id;\nconst filteredCampusSpot = existingCampusSpots.find(filterCheck);\ndbServiceStub.returns([filteredCampusSpot]);\n// act\nconst campusSpot = await CampusSpotModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.campus_spot_id]))).to.be.true;\nexpect(campusSpot).to.be.eql(filteredCampusSpot);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95fa9172-e60a-4f0f-af77-ca0b6b8ce941&quot;,&quot;parentUUID&quot;:&quot;b5543445-a7f6-4f53-aad4-6181a4f94214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findOne \n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst campusSpot = await CampusSpotModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(campusSpot).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d2f1a21-fe72-4a41-940c-9f46f146e8d1&quot;,&quot;parentUUID&quot;:&quot;b5543445-a7f6-4f53-aad4-6181a4f94214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await CampusSpotModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a6aa3c9-3f36-4c51-90f8-e281cc379d60&quot;,&quot;parentUUID&quot;:&quot;b5543445-a7f6-4f53-aad4-6181a4f94214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95fa9172-e60a-4f0f-af77-ca0b6b8ce941&quot;,&quot;3d2f1a21-fe72-4a41-940c-9f46f146e8d1&quot;,&quot;0a6aa3c9-3f36-4c51-90f8-e281cc379d60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a413353-c4b4-40fb-8dab-34deab3344bc&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new campus spot\n            WHEN this function is called with new data\n            THEN a new campus spot is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model create \n            GIVEN a new campus spot\n            WHEN this function is called with new data\n            THEN a new campus spot is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingCampusSpots.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await CampusSpotModel.create(newCampusSpot);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newCampusSpot.campus_spot, newCampusSpot.campus_id])\n)).to.be.true;\nexpect(result.campus_spot_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae42790a-75e0-493a-a725-51750f0fa752&quot;,&quot;parentUUID&quot;:&quot;7a413353-c4b4-40fb-8dab-34deab3344bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new campus spot\n            WHEN this function is called with new data\n            AND the database fails to create a new campus spot\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model create \n            GIVEN a new campus spot\n            WHEN this function is called with new data\n            AND the database fails to create a new campus spot\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst campusSpot = await CampusSpotModel.create(newCampusSpot);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(campusSpot).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc14d517-838c-4581-b9f5-8debde39eb07&quot;,&quot;parentUUID&quot;:&quot;7a413353-c4b4-40fb-8dab-34deab3344bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await CampusSpotModel.create(newCampusSpot);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e26f6a6-7d5a-45bc-bdc2-fe6adca0af94&quot;,&quot;parentUUID&quot;:&quot;7a413353-c4b4-40fb-8dab-34deab3344bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae42790a-75e0-493a-a725-51750f0fa752&quot;,&quot;dc14d517-838c-4581-b9f5-8debde39eb07&quot;,&quot;1e26f6a6-7d5a-45bc-bdc2-fe6adca0af94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            THEN the specific campus spot is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model update \n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            THEN the specific campus spot is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingCampusSpots[0].campus_spot_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await CampusSpotModel.update(newCampusSpot, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newCampusSpot.campus_spot, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83b17390-00ce-4346-a971-7c2b5a886e20&quot;,&quot;parentUUID&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database fails to find an campus spot with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model update \n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database fails to find an campus spot with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingCampusSpots[0].campus_spot_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await CampusSpotModel.update(newCampusSpot, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;388173a9-5c94-4450-915a-184eb8bd57be&quot;,&quot;parentUUID&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database finds the campus spot but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model update \n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database finds the campus spot but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingCampusSpots[0].campus_spot_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await CampusSpotModel.update(newCampusSpot, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee9f17da-fb84-4535-be3d-0a2177ee620c&quot;,&quot;parentUUID&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database fails to update the campus spot name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model update \n            GIVEN a new campus spot name\n            WHEN this function is called with new data and id\n            AND the database fails to update the campus spot name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingCampusSpots[0].campus_spot_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await CampusSpotModel.update(newCampusSpot, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc3700ce-ef20-43ba-9fef-dffe61c0b313&quot;,&quot;parentUUID&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingCampusSpots[0].campus_spot_id;\n// act\nlet error;\ntry {\n    await CampusSpotModel.update(newCampusSpot, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91d9e864-b52d-4ff8-9d1e-02726ed9ac83&quot;,&quot;parentUUID&quot;:&quot;98d560d0-457f-47ef-b615-3b85dda25c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83b17390-00ce-4346-a971-7c2b5a886e20&quot;,&quot;388173a9-5c94-4450-915a-184eb8bd57be&quot;,&quot;ee9f17da-fb84-4535-be3d-0a2177ee620c&quot;,&quot;fc3700ce-ef20-43ba-9fef-dffe61c0b313&quot;,&quot;91d9e864-b52d-4ff8-9d1e-02726ed9ac83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23e342bb-e687-4125-bee6-3c910b0efac3&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\campusSpot.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some campus spots\n            WHEN this function is called with an existing campus_spot_id\n            THEN that campus spot is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model delete \n            GIVEN the database has some campus spots\n            WHEN this function is called with an existing campus_spot_id\n            THEN that campus spot is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await CampusSpotModel.delete(campusSpotId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([campusSpotId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51e389d8-3ba8-41e6-9813-185bf93dea92&quot;,&quot;parentUUID&quot;:&quot;23e342bb-e687-4125-bee6-3c910b0efac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model delete \n            GIVEN the database has no campus spots\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await CampusSpotModel.delete(campusSpotId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([campusSpotId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2369bb8a-eba5-48fd-b05a-9f9c77c2e836&quot;,&quot;parentUUID&quot;:&quot;23e342bb-e687-4125-bee6-3c910b0efac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Campus Spot Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await CampusSpotModel.delete(campusSpotId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([campusSpotId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9f3faa1-636f-4c52-b9fc-c57e063fd5f3&quot;,&quot;parentUUID&quot;:&quot;23e342bb-e687-4125-bee6-3c910b0efac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51e389d8-3ba8-41e6-9813-185bf93dea92&quot;,&quot;2369bb8a-eba5-48fd-b05a-9f9c77c2e836&quot;,&quot;c9f3faa1-636f-4c52-b9fc-c57e063fd5f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9da6440b-6b26-4126-bb4d-8af2d1150422&quot;,&quot;title&quot;:&quot;Hobby Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Hobby Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hobby Model \&quot;before each\&quot; hook in \&quot;Hobby Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e329ab4-ed2e-42b9-bb23-c1f97515b10f&quot;,&quot;parentUUID&quot;:&quot;9da6440b-6b26-4126-bb4d-8af2d1150422&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Hobby Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hobby Model \&quot;after each\&quot; hook in \&quot;Hobby Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7160ccd-3a14-433a-8f67-23370fd1021a&quot;,&quot;parentUUID&quot;:&quot;9da6440b-6b26-4126-bb4d-8af2d1150422&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;28215baa-cde6-4d8e-84a7-b5cad0c508fb&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some hobbies\n            WHEN this function is called with empty filters\n            THEN all hobbies are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findAll \n            GIVEN the database has some hobbies\n            WHEN this function is called with empty filters\n            THEN all hobbies are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingHobbies);\n// act\nconst hobbyList = await HobbyModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(hobbyList).to.be.eql(existingHobbies);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78a89902-1bd9-451b-b0b6-bfd304e6a3d6&quot;,&quot;parentUUID&quot;:&quot;28215baa-cde6-4d8e-84a7-b5cad0c508fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some hobbies\n            WHEN this function is called with filters specified\n            THEN only matching hobbies are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findAll \n            GIVEN the database has some hobbies\n            WHEN this function is called with filters specified\n            THEN only matching hobbies are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {hobby_id: 1};\nconst filterCheck = (hobby) =&gt; hobby.hobby_id === filters.hobby_id;\nconst filteredHobbies = existingHobbies.filter(filterCheck);\ndbServiceStub.returns(filteredHobbies);\n// act\nconst hobbyList = await HobbyModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(hobbyList).to.be.eql(filteredHobbies);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b608ebef-42f5-4a5b-a7ea-78c61bbe80d7&quot;,&quot;parentUUID&quot;:&quot;28215baa-cde6-4d8e-84a7-b5cad0c508fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findAll \n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst hobbyList = await HobbyModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(hobbyList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3d41dde-5c16-40a1-98c5-bf54935b08b7&quot;,&quot;parentUUID&quot;:&quot;28215baa-cde6-4d8e-84a7-b5cad0c508fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await HobbyModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75b59800-37b6-4a2f-b996-cddb7f785311&quot;,&quot;parentUUID&quot;:&quot;28215baa-cde6-4d8e-84a7-b5cad0c508fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78a89902-1bd9-451b-b0b6-bfd304e6a3d6&quot;,&quot;b608ebef-42f5-4a5b-a7ea-78c61bbe80d7&quot;,&quot;b3d41dde-5c16-40a1-98c5-bf54935b08b7&quot;,&quot;75b59800-37b6-4a2f-b996-cddb7f785311&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;54c1a398-4b2e-410b-a220-005142b98ca9&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some hobbies\n            WHEN this function is called with some filter\n            THEN a single filtered hobby is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findOne \n            GIVEN the database has some hobbies\n            WHEN this function is called with some filter\n            THEN a single filtered hobby is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (hobby) =&gt; hobby.hobby_id === filters.hobby_id;\nconst filteredHobby = existingHobbies.find(filterCheck);\ndbServiceStub.returns([filteredHobby]);\n// act\nconst hobby = await HobbyModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.hobby_id]))).to.be.true;\nexpect(hobby).to.be.eql(filteredHobby);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2d4ddbd-be10-4338-a2cf-a8523f2d6c8e&quot;,&quot;parentUUID&quot;:&quot;54c1a398-4b2e-410b-a220-005142b98ca9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findOne \n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst hobby = await HobbyModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(hobby).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;462239cd-d571-4c68-8362-7a2ea6d7c8d9&quot;,&quot;parentUUID&quot;:&quot;54c1a398-4b2e-410b-a220-005142b98ca9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await HobbyModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd6d21e2-0c8a-4709-81a1-b402d8b93ee6&quot;,&quot;parentUUID&quot;:&quot;54c1a398-4b2e-410b-a220-005142b98ca9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2d4ddbd-be10-4338-a2cf-a8523f2d6c8e&quot;,&quot;462239cd-d571-4c68-8362-7a2ea6d7c8d9&quot;,&quot;dd6d21e2-0c8a-4709-81a1-b402d8b93ee6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a266c1b-6665-4e49-933a-4cd5fa51f102&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new hobby\n            WHEN this function is called with new data\n            THEN a new hobby is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model create \n            GIVEN a new hobby\n            WHEN this function is called with new data\n            THEN a new hobby is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingHobbies.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await HobbyModel.create(newHobby);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([newHobby.hobby]))).to.be.true;\nexpect(result.hobby_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bafa102-1ea7-4d75-9c1e-495e3b99a989&quot;,&quot;parentUUID&quot;:&quot;9a266c1b-6665-4e49-933a-4cd5fa51f102&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new hobby\n            WHEN this function is called with new data\n            AND the database fails to create a new hobby\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model create \n            GIVEN a new hobby\n            WHEN this function is called with new data\n            AND the database fails to create a new hobby\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst hobby = await HobbyModel.create(newHobby);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(hobby).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42fb75a6-c1ea-40ef-a624-26a517e8864f&quot;,&quot;parentUUID&quot;:&quot;9a266c1b-6665-4e49-933a-4cd5fa51f102&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await HobbyModel.create(newHobby);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a85078ae-316c-4234-8258-8551937fcd82&quot;,&quot;parentUUID&quot;:&quot;9a266c1b-6665-4e49-933a-4cd5fa51f102&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bafa102-1ea7-4d75-9c1e-495e3b99a989&quot;,&quot;42fb75a6-c1ea-40ef-a624-26a517e8864f&quot;,&quot;a85078ae-316c-4234-8258-8551937fcd82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            THEN the specific hobby is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model update \n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            THEN the specific hobby is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingHobbies[0].hobby_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await HobbyModel.update(newHobby, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newHobby.hobby, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e5c85ea-d888-4187-8a82-d209a01ea066&quot;,&quot;parentUUID&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database fails to find an hobby with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model update \n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database fails to find an hobby with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingHobbies[0].hobby_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await HobbyModel.update(newHobby, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f96cb9bf-92c3-400d-b5b3-1c840298171c&quot;,&quot;parentUUID&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database finds the hobby but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model update \n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database finds the hobby but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingHobbies[0].hobby_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await HobbyModel.update(newHobby, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1599532a-464d-4276-a748-f62d02e87690&quot;,&quot;parentUUID&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database fails to update the hobby name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model update \n            GIVEN a new hobby name\n            WHEN this function is called with new data and id\n            AND the database fails to update the hobby name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingHobbies[0].hobby_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await HobbyModel.update(newHobby, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33a5263e-5798-4ef9-864d-dcbb58bf0e71&quot;,&quot;parentUUID&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingHobbies[0].hobby_id;\n// act\nlet error;\ntry {\n    await HobbyModel.update(newHobby, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3eaac342-2e11-4972-91d9-17ff3cd2e10b&quot;,&quot;parentUUID&quot;:&quot;2b3aa53d-e865-4caa-85e9-f77f4a1c1a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e5c85ea-d888-4187-8a82-d209a01ea066&quot;,&quot;f96cb9bf-92c3-400d-b5b3-1c840298171c&quot;,&quot;1599532a-464d-4276-a748-f62d02e87690&quot;,&quot;33a5263e-5798-4ef9-864d-dcbb58bf0e71&quot;,&quot;3eaac342-2e11-4972-91d9-17ff3cd2e10b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;22ed71ae-1fb4-4eed-acea-8c981c4d539d&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\hobby.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some hobbies\n            WHEN this function is called with an existing hobby_id\n            THEN that hobby is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model delete \n            GIVEN the database has some hobbies\n            WHEN this function is called with an existing hobby_id\n            THEN that hobby is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await HobbyModel.delete(hobbyId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([hobbyId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c472b109-1a4e-40f1-b37a-94d3fd366c0f&quot;,&quot;parentUUID&quot;:&quot;22ed71ae-1fb4-4eed-acea-8c981c4d539d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model delete \n            GIVEN the database has no hobbies\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await HobbyModel.delete(hobbyId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([hobbyId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;620800f3-7e34-4bc8-a9e3-c2c6a1801023&quot;,&quot;parentUUID&quot;:&quot;22ed71ae-1fb4-4eed-acea-8c981c4d539d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Hobby Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await HobbyModel.delete(hobbyId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([hobbyId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4d66df8-8742-4262-9371-17a77a80bc0d&quot;,&quot;parentUUID&quot;:&quot;22ed71ae-1fb4-4eed-acea-8c981c4d539d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c472b109-1a4e-40f1-b37a-94d3fd366c0f&quot;,&quot;620800f3-7e34-4bc8-a9e3-c2c6a1801023&quot;,&quot;e4d66df8-8742-4262-9371-17a77a80bc0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c277b126-2cef-4a0b-a715-dacb70ec0068&quot;,&quot;title&quot;:&quot;Interest Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Interest Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Interest Model \&quot;before each\&quot; hook in \&quot;Interest Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33aa57e4-9e66-4b86-b783-6cdf10097446&quot;,&quot;parentUUID&quot;:&quot;c277b126-2cef-4a0b-a715-dacb70ec0068&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Interest Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Interest Model \&quot;after each\&quot; hook in \&quot;Interest Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd3ea049-bd90-42c2-a131-6a7a37867ed7&quot;,&quot;parentUUID&quot;:&quot;c277b126-2cef-4a0b-a715-dacb70ec0068&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4379985d-b5ca-40ff-97a7-8095e0702a74&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some interests\n            WHEN this function is called with empty filters\n            THEN all interests are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findAll \n            GIVEN the database has some interests\n            WHEN this function is called with empty filters\n            THEN all interests are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingInterests);\n// act\nconst interestList = await InterestModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(interestList).to.be.eql(existingInterests);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50e77540-18e2-4e66-8835-7384214c5008&quot;,&quot;parentUUID&quot;:&quot;4379985d-b5ca-40ff-97a7-8095e0702a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some interests\n            WHEN this function is called with filters specified\n            THEN only matching interests are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findAll \n            GIVEN the database has some interests\n            WHEN this function is called with filters specified\n            THEN only matching interests are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {interest_id: 1};\nconst filterCheck = (interest) =&gt; interest.interest_id === filters.interest_id;\nconst filteredInterests = existingInterests.filter(filterCheck);\ndbServiceStub.returns(filteredInterests);\n// act\nconst interestList = await InterestModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(interestList).to.be.eql(filteredInterests);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e96272f-3ab6-473b-8fc8-106d9defb3e6&quot;,&quot;parentUUID&quot;:&quot;4379985d-b5ca-40ff-97a7-8095e0702a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findAll \n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst interestList = await InterestModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(interestList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e40a7f1-81bb-4c71-995d-0349b0450254&quot;,&quot;parentUUID&quot;:&quot;4379985d-b5ca-40ff-97a7-8095e0702a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await InterestModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2e46ee7-4e81-4e18-9497-fc31ad4dd9a8&quot;,&quot;parentUUID&quot;:&quot;4379985d-b5ca-40ff-97a7-8095e0702a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50e77540-18e2-4e66-8835-7384214c5008&quot;,&quot;8e96272f-3ab6-473b-8fc8-106d9defb3e6&quot;,&quot;8e40a7f1-81bb-4c71-995d-0349b0450254&quot;,&quot;f2e46ee7-4e81-4e18-9497-fc31ad4dd9a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10922fc2-8183-4024-ad91-7a8b51ae4959&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some interests\n            WHEN this function is called with some filter\n            THEN a single filtered interest is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findOne \n            GIVEN the database has some interests\n            WHEN this function is called with some filter\n            THEN a single filtered interest is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (interest) =&gt; interest.interest_id === filters.interest_id;\nconst filteredInterest = existingInterests.find(filterCheck);\ndbServiceStub.returns([filteredInterest]);\n// act\nconst interest = await InterestModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.interest_id]))).to.be.true;\nexpect(interest).to.be.eql(filteredInterest);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;678aadb0-bbbc-49af-98ee-8102372c9b48&quot;,&quot;parentUUID&quot;:&quot;10922fc2-8183-4024-ad91-7a8b51ae4959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findOne \n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst interest = await InterestModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(interest).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c99c710-f864-4e08-9558-22d5c34b9d4a&quot;,&quot;parentUUID&quot;:&quot;10922fc2-8183-4024-ad91-7a8b51ae4959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await InterestModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67e2e775-7831-4f4a-b238-92d70f028444&quot;,&quot;parentUUID&quot;:&quot;10922fc2-8183-4024-ad91-7a8b51ae4959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;678aadb0-bbbc-49af-98ee-8102372c9b48&quot;,&quot;5c99c710-f864-4e08-9558-22d5c34b9d4a&quot;,&quot;67e2e775-7831-4f4a-b238-92d70f028444&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e49bcfc1-71c6-4c2e-9c04-2cc680b1a426&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new interest\n            WHEN this function is called with new data\n            THEN a new interest is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model create \n            GIVEN a new interest\n            WHEN this function is called with new data\n            THEN a new interest is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingInterests.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await InterestModel.create(newInterest);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([newInterest.interest]))).to.be.true;\nexpect(result.interest_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34c7c538-6fcd-413b-b624-a6fcef555482&quot;,&quot;parentUUID&quot;:&quot;e49bcfc1-71c6-4c2e-9c04-2cc680b1a426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new interest\n            WHEN this function is called with new data\n            AND the database fails to create a new interest\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model create \n            GIVEN a new interest\n            WHEN this function is called with new data\n            AND the database fails to create a new interest\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst interest = await InterestModel.create(newInterest);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(interest).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09042871-92cc-4189-a9b7-4dbe0c95e56e&quot;,&quot;parentUUID&quot;:&quot;e49bcfc1-71c6-4c2e-9c04-2cc680b1a426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await InterestModel.create(newInterest);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc467d27-ea45-469d-bdad-c01ad04243d1&quot;,&quot;parentUUID&quot;:&quot;e49bcfc1-71c6-4c2e-9c04-2cc680b1a426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34c7c538-6fcd-413b-b624-a6fcef555482&quot;,&quot;09042871-92cc-4189-a9b7-4dbe0c95e56e&quot;,&quot;fc467d27-ea45-469d-bdad-c01ad04243d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            THEN the specific interest is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model update \n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            THEN the specific interest is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingInterests[0].interest_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await InterestModel.update(newInterest, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newInterest.interest, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad4a0f80-6a3a-4113-bba4-00964c2a5126&quot;,&quot;parentUUID&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database fails to find an interest with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model update \n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database fails to find an interest with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingInterests[0].interest_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await InterestModel.update(newInterest, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ed58fa8-f412-4088-aa82-f801c57122be&quot;,&quot;parentUUID&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database finds the interest but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model update \n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database finds the interest but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingInterests[0].interest_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await InterestModel.update(newInterest, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98359e56-b3d8-4e9f-a819-4e68f2cdbb56&quot;,&quot;parentUUID&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database fails to update the interest name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model update \n            GIVEN a new interest name\n            WHEN this function is called with new data and id\n            AND the database fails to update the interest name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingInterests[0].interest_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await InterestModel.update(newInterest, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a0cb0d0-3244-4829-82fc-73d094b8e558&quot;,&quot;parentUUID&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingInterests[0].interest_id;\n// act\nlet error;\ntry {\n    await InterestModel.update(newInterest, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8cf51aa-7da0-4b2e-9d93-fd843bd97df9&quot;,&quot;parentUUID&quot;:&quot;ad81a29b-627c-489f-be68-38ab7726d165&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad4a0f80-6a3a-4113-bba4-00964c2a5126&quot;,&quot;3ed58fa8-f412-4088-aa82-f801c57122be&quot;,&quot;98359e56-b3d8-4e9f-a819-4e68f2cdbb56&quot;,&quot;6a0cb0d0-3244-4829-82fc-73d094b8e558&quot;,&quot;c8cf51aa-7da0-4b2e-9d93-fd843bd97df9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4f4476ad-762e-46e7-8da2-44aceb3c7410&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\interest.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\interest.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some interests\n            WHEN this function is called with an existing interest_id\n            THEN that interest is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model delete \n            GIVEN the database has some interests\n            WHEN this function is called with an existing interest_id\n            THEN that interest is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await InterestModel.delete(interestId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([interestId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a43637e6-a939-479f-bb82-4110d20e43ae&quot;,&quot;parentUUID&quot;:&quot;4f4476ad-762e-46e7-8da2-44aceb3c7410&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model delete \n            GIVEN the database has no interests\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await InterestModel.delete(interestId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([interestId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa94ad28-afac-46ea-9ff0-39ccc3225cf3&quot;,&quot;parentUUID&quot;:&quot;4f4476ad-762e-46e7-8da2-44aceb3c7410&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Interest Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await InterestModel.delete(interestId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([interestId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;083582c5-6e5c-48f2-9f9a-5d4e02104d35&quot;,&quot;parentUUID&quot;:&quot;4f4476ad-762e-46e7-8da2-44aceb3c7410&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a43637e6-a939-479f-bb82-4110d20e43ae&quot;,&quot;fa94ad28-afac-46ea-9ff0-39ccc3225cf3&quot;,&quot;083582c5-6e5c-48f2-9f9a-5d4e02104d35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.0.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:false,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:true,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test/unit/report&quot;,&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;json&quot;:&quot;false&quot;,&quot;autoOpen&quot;:&quot;true&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;reportDir&quot;:&quot;test/unit/report&quot;,&quot;reportTitle&quot;:&quot;UniPal-Backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:true,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test\\unit\\report\\assets&quot;,&quot;htmlFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\report\\unit-tests-report.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>