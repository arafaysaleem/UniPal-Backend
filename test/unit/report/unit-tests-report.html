<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:6,&quot;tests&quot;:18,&quot;passes&quot;:18,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2022-06-25T22:06:55.831Z&quot;,&quot;end&quot;:&quot;2022-06-25T22:06:55.903Z&quot;,&quot;duration&quot;:72,&quot;testsRegistered&quot;:18,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e4109a26-117c-4f9d-a00a-0d3f8796c258&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1d50c5e5-dc04-474d-8fa8-9da1671dd3ca&quot;,&quot;title&quot;:&quot;Activity Status Model&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Status Model \&quot;before each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub = sinon.stub(DBService, &#x27;query&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf24b0a-3b1b-402a-aa3c-96060fd3dc78&quot;,&quot;parentUUID&quot;:&quot;1d50c5e5-dc04-474d-8fa8-9da1671dd3ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Activity Status Model \&quot;after each\&quot; hook in \&quot;Activity Status Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dbServiceStub.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31529d14-2dab-47f2-a72a-218062224576&quot;,&quot;parentUUID&quot;:&quot;1d50c5e5-dc04-474d-8fa8-9da1671dd3ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;431b2c89-dfca-4471-9dd1-b115cb39a4d4&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with empty filters\n            THEN all activity statuses are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some activity statuses\n            WHEN this function is called with empty filters\n            THEN all activity statuses are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(existingActivityStatuses);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityStatusList).to.be.eql(existingActivityStatuses);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11eebf2e-98c0-4f33-92f2-deeaa8a13285&quot;,&quot;parentUUID&quot;:&quot;431b2c89-dfca-4471-9dd1-b115cb39a4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with filters specified\n            THEN only matching activity statuses are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some activity statuses\n            WHEN this function is called with filters specified\n            THEN only matching activity statuses are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filters = {activity_status_id: 1};\nconst filterCheck = (aStatus) =&gt; aStatus.activity_status_id === filters.activity_status_id;\nconst filteredActivityStatuses = existingActivityStatuses.filter(filterCheck);\ndbServiceStub.returns(filteredActivityStatuses);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatusList).to.be.eql(filteredActivityStatuses);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b09f723-8970-4b26-9324-819807a35c47&quot;,&quot;parentUUID&quot;:&quot;431b2c89-dfca-4471-9dd1-b115cb39a4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty array is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n// act\nconst activityStatusList = await ActivityStatusModel.findAll({});\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(activityStatusList).to.be.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e332e653-3a81-458e-871d-39c5dd608f7d&quot;,&quot;parentUUID&quot;:&quot;431b2c89-dfca-4471-9dd1-b115cb39a4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findAll \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.findAll({});\n    expect.fail(&#x27;findAll should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e94faec4-d1b4-4042-a669-5da28013414d&quot;,&quot;parentUUID&quot;:&quot;431b2c89-dfca-4471-9dd1-b115cb39a4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11eebf2e-98c0-4f33-92f2-deeaa8a13285&quot;,&quot;7b09f723-8970-4b26-9324-819807a35c47&quot;,&quot;e332e653-3a81-458e-871d-39c5dd608f7d&quot;,&quot;e94faec4-d1b4-4042-a669-5da28013414d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93d621c3-0333-405a-8332-bce3067c7a8d&quot;,&quot;title&quot;:&quot;findOne&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with some filter\n            THEN a single filtered activity status is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has some activity statuses\n            WHEN this function is called with some filter\n            THEN a single filtered activity status is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst filterCheck = (aStatus) =&gt; aStatus.activity_status_id === filters.activity_status_id;\nconst filteredActivityStatus = existingActivityStatuses.find(filterCheck);\ndbServiceStub.returns([filteredActivityStatus]);\n// act\nconst activityStatus = await ActivityStatusModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([filters.activity_status_id]))).to.be.true;\nexpect(activityStatus).to.be.eql(filteredActivityStatus);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b2f8402-d725-4067-9a65-2ef9da5ce921&quot;,&quot;parentUUID&quot;:&quot;93d621c3-0333-405a-8332-bce3067c7a8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN empty object is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns([]);\n\n// act\nconst activityStatus = await ActivityStatusModel.findOne(filters);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatus).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09acf3f2-8b48-4cab-8a7d-7d46de63c164&quot;,&quot;parentUUID&quot;:&quot;93d621c3-0333-405a-8332-bce3067c7a8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model findOne \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.findOne(filters);\n    expect.fail(&#x27;findOne should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbd709c9-213f-46ab-8a06-5675f363b85a&quot;,&quot;parentUUID&quot;:&quot;93d621c3-0333-405a-8332-bce3067c7a8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b2f8402-d725-4067-9a65-2ef9da5ce921&quot;,&quot;09acf3f2-8b48-4cab-8a7d-7d46de63c164&quot;,&quot;fbd709c9-213f-46ab-8a06-5675f363b85a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c0bcf48-bfb0-41ba-a315-440879f9bbc0&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity status\n            WHEN this function is called with new data\n            THEN a new activity status is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN a new activity status\n            WHEN this function is called with new data\n            THEN a new activity status is created successfully\n            AND it&#x27;s id is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst newId = existingActivityStatuses.length + 1;\ndbServiceStub.returns({ insertId: newId, affectedRows: 1 });\n// act\nconst result = await ActivityStatusModel.create(newActivityStatus);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([newActivityStatus.activity_status]))).to.be.true;\nexpect(result.activity_status_id).to.be.equal(newId);\nexpect(result.affected_rows).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;442f42e0-34e2-4ec9-89c4-132dc4393c75&quot;,&quot;parentUUID&quot;:&quot;2c0bcf48-bfb0-41ba-a315-440879f9bbc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status\n            WHEN this function is called with new data\n            AND the database fails to create a new activity status\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN a new activity status\n            WHEN this function is called with new data\n            AND the database fails to create a new activity status\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst activityStatus = await ActivityStatusModel.create(newActivityStatus);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(activityStatus).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;602ad0be-7db9-4e22-9cbb-06d8343b7d01&quot;,&quot;parentUUID&quot;:&quot;2c0bcf48-bfb0-41ba-a315-440879f9bbc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model create \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.create(newActivityStatus);\n    expect.fail(&#x27;create should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baf38825-3c1a-45aa-93e8-39ff3a310fdb&quot;,&quot;parentUUID&quot;:&quot;2c0bcf48-bfb0-41ba-a315-440879f9bbc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;442f42e0-34e2-4ec9-89c4-132dc4393c75&quot;,&quot;602ad0be-7db9-4e22-9cbb-06d8343b7d01&quot;,&quot;baf38825-3c1a-45aa-93e8-39ff3a310fdb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            THEN the specific activity status is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            THEN the specific activity status is updated successfully\n            AND a result with update information is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 1, info: \&quot;Rows updated successfully\&quot; });\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(\n    sinon.match.string,\n    sinon.match([newActivityStatus.activity_status, existingId])\n)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(1);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ac2c698-f85e-462b-9de4-120054114368&quot;,&quot;parentUUID&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity status with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to find an activity status with this id\n            THEN 0 affectedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 0, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(0);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be16d38a-7048-447a-bbcc-8cad07da8e95&quot;,&quot;parentUUID&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database finds the activity status but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database finds the activity status but fails to update it\n            THEN 0 changedRows are returned in the result\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns({ affectedRows: 1, changedRows: 0, info: \&quot;Rows failed to be updated\&quot; });\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result.affectedRows).to.be.equal(1);\nexpect(result.changedRows).to.be.equal(0);\nexpect(result.info).to.be.a.string;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd61f013-792c-45a7-978e-c51ef310fad5&quot;,&quot;parentUUID&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity status name\n            THEN undefined is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN a new activity status name\n            WHEN this function is called with new data and id\n            AND the database fails to update the activity status name\n            THEN undefined is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst existingId = existingActivityStatuses[0].activity_status_id;\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityStatusModel.update(newActivityStatus, existingId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(result).to.be.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;145e2114-3168-4a9f-9b36-33dbfd03ebc4&quot;,&quot;parentUUID&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model update \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\nconst existingId = existingActivityStatuses[0].activity_status_id;\n// act\nlet error;\ntry {\n    await ActivityStatusModel.update(newActivityStatus, existingId);\n    expect.fail(&#x27;update should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match.array)).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69b19967-2c10-4823-950c-cc5d306d8fd5&quot;,&quot;parentUUID&quot;:&quot;c36408df-8d4b-4039-b4eb-33471996d546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ac2c698-f85e-462b-9de4-120054114368&quot;,&quot;be16d38a-7048-447a-bbcc-8cad07da8e95&quot;,&quot;dd61f013-792c-45a7-978e-c51ef310fad5&quot;,&quot;145e2114-3168-4a9f-9b36-33dbfd03ebc4&quot;,&quot;69b19967-2c10-4823-950c-cc5d306d8fd5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;049077c9-218d-4444-b37d-0759cc70ace4&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;file&quot;:&quot;\\test\\unit\\models\\activityStatus.model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;\n            GIVEN the database has some activity statuses\n            WHEN this function is called with an existing activity_status_id\n            THEN that activity status is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has some activity statuses\n            WHEN this function is called with an existing activity_status_id\n            THEN that activity status is deleted\n            AND number of affectedRows are returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns({ affectedRows: 1, info: \&quot;Rows deleted successfully\&quot; });\n// act\nconst result = await ActivityStatusModel.delete(activityStatusId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(result).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cb4e107-b1de-417c-bc96-a400c480d092&quot;,&quot;parentUUID&quot;:&quot;049077c9-218d-4444-b37d-0759cc70ace4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has no activity statuses\n            WHEN this function is called\n            THEN 0 is returned\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\ndbServiceStub.returns(undefined);\n\n// act\nconst result = await ActivityStatusModel.delete(activityStatusId);\n    \n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(result).to.be.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21cca5d1-79fc-4b13-9a73-02cac65f6d0d&quot;,&quot;parentUUID&quot;:&quot;049077c9-218d-4444-b37d-0759cc70ace4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;fullTitle&quot;:&quot;Activity Status Model delete \n            GIVEN the database has some error\n            WHEN this function is called\n            THEN an exception is thrown\n        &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// arrange\nconst exception = new DatabaseException(&#x27;some error&#x27;);\ndbServiceStub.throws(exception);\n// act\nlet error;\ntry {\n    await ActivityStatusModel.delete(activityStatusId);\n    expect.fail(&#x27;delete should be rejected&#x27;);\n} catch (err) {\n    error = err;\n}\n\n// assert\nexpect(dbServiceStub.calledOnce).to.be.true;\nexpect(dbServiceStub.calledWithExactly(sinon.match.string, sinon.match([activityStatusId]))).to.be.true;\nexpect(dbServiceStub.threw(exception)).to.be.true;\nexpect(error instanceof DatabaseException).to.be.true;\nexpect(error.message).to.be.equal(\&quot;some error\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99bc34ee-9f22-471f-b9f3-7bf6ed989bab&quot;,&quot;parentUUID&quot;:&quot;049077c9-218d-4444-b37d-0759cc70ace4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3cb4e107-b1de-417c-bc96-a400c480d092&quot;,&quot;21cca5d1-79fc-4b13-9a73-02cac65f6d0d&quot;,&quot;99bc34ee-9f22-471f-b9f3-7bf6ed989bab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.0.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:false,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:true,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test/unit/report&quot;,&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;json&quot;:&quot;false&quot;,&quot;autoOpen&quot;:&quot;true&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;unit-tests-report&quot;,&quot;reportDir&quot;:&quot;test/unit/report&quot;,&quot;reportTitle&quot;:&quot;UniPal-Backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:true,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test\\unit\\report\\assets&quot;,&quot;htmlFile&quot;:&quot;D:\\nodejs_projects\\UniPal-Backend\\test\\unit\\report\\unit-tests-report.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>